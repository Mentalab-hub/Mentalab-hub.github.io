<!DOCTYPE html>
<html><head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="canonical" href="https://wiki.mentalab.com/integrations/psychopy/">

    <title>
        
        PsychoPy Builder | Mentalab Wiki
        
    </title>

    
    <link href="https://wiki.mentalab.com/css/fontawesome.min.css" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet'>

    
    <link rel="stylesheet" href="https://wiki.mentalab.com/css/ace.min.css">

    

</head>
<body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id="navbarMain">
    <div class="container">
        <div>
            <a class="navbar-brand" href="/">
                <img style="padding:10px 10px 15px 10px;" src="https://fyi.cpg.mybluehost.me/wp-content/uploads/2022/01/cropped-Mentalab-Icon-CMYK.png" />
                Mentalab Wiki
            </a>
        </div>
        
    </div>
    <a class="nav-link" href="https://mentalab.com">
		<button class="btn btn-secondary mt-n1" style="margin: 0px 100px 0px 0px; ">mentalab.com</button>
	</a>
</nav>
<div class="container-fluid">
            <div class="row">

                <div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0">
    <button class="navbar-toggler navbar-toggler-right collapsed" type="button" data-toggle="collapse" data-target="#sidenav-left-collapse" aria-controls="sidenav-left-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

     <div class="collapse navbar-collapse align-items-start flex-column" id="sidenav-left-collapse">
         <ul class="navbar-nav flex-column pt-3">
    <li data-nav-id="/quick-links/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/quick-links/"><h6>Quick Links</h6></a>
    </li>
    <li data-nav-id="/user-guide/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/user-guide/"><h6>User Guide</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/user-guide/operating-instructions/" class="nav-item my-1">
                
                 <a href="/user-guide/operating-instructions/" class="nav-link p-0">
                    Operating Instructions
                </a>
        </li>
        <li data-nav-id="/user-guide/dry-electrode-guide/" class="nav-item my-1">
                
                 <a href="/user-guide/dry-electrode-guide/" class="nav-link p-0">
                    Dry Electrode Guide
                </a>
        </li>
        <li data-nav-id="/user-guide/led-light-guide/" class="nav-item my-1">
                
                 <a href="/user-guide/led-light-guide/" class="nav-link p-0">
                    LED Light Guide
                </a>
        </li>
        <li data-nav-id="/user-guide/button-guide/" class="nav-item my-1">
                
                 <a href="/user-guide/button-guide/" class="nav-link p-0">
                    Button Command Guide
                </a>
        </li>
        <li data-nav-id="/user-guide/cap-size-guide/" class="nav-item my-1">
                
                 <a href="/user-guide/cap-size-guide/" class="nav-link p-0">
                    Cap Size Guide
                </a>
        </li>
        <li data-nav-id="/user-guide/improving-impedances/" class="nav-item my-1">
                
                 <a href="/user-guide/improving-impedances/" class="nav-link p-0">
                    Improving Impedances
                </a>
        </li>
        <li data-nav-id="/user-guide/explorepy-commands/" class="nav-item my-1">
                
                 <a href="/user-guide/explorepy-commands/" class="nav-link p-0">
                    explorepy Command Guide
                </a>
        </li>
        <li data-nav-id="/user-guide/cleaning-disinfection-storage/" class="nav-item my-1">
                
                 <a href="/user-guide/cleaning-disinfection-storage/" class="nav-link p-0">
                    Cleaning, Disinfecting and Storing Mentalab Hardware
                </a>
        </li>
        <li data-nav-id="/user-guide/safety-recommendations/" class="nav-item my-1">
                
                 <a href="/user-guide/safety-recommendations/" class="nav-link p-0">
                    Safety Recommendations
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/event-triggers/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/event-triggers/"><h6>Event Triggers</h6></a>
    </li>
    <li data-nav-id="/applications/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/applications/"><h6>Applications</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/applications/power-bands/" class="nav-item my-1">
                
                 <a href="/applications/power-bands/" class="nav-link p-0">
                    EOG Artifact Removal
                </a>
        </li>
        <li data-nav-id="/applications/ssvep/" class="nav-item my-1">
                
                 <a href="/applications/ssvep/" class="nav-link p-0">
                    SSVEP Experiments
                </a>
        </li>
        <li data-nav-id="/applications/easi-ecg/" class="nav-item my-1">
                
                 <a href="/applications/easi-ecg/" class="nav-link p-0">
                    EASI ECG
                </a>
        </li>
        <li data-nav-id="/applications/p300/" class="nav-item my-1">
                
                 <a href="/applications/p300/" class="nav-link p-0">
                    P300 Experiment
                </a>
        </li>
        <li data-nav-id="/applications/sleep-recording-protocol/" class="nav-item my-1">
                
                 <a href="/applications/sleep-recording-protocol/" class="nav-link p-0">
                    Sleep Recording Protocol
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/integrations/" class="nav-item my-1 parent haschildren
        ">
        
        <a class="nav-link p-0" href="/integrations/"><h6>Integrations</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/integrations/supported-software/" class="nav-item my-1">
                
                 <a href="/integrations/supported-software/" class="nav-link p-0">
                    Supported Software
                </a>
        </li>
        <li data-nav-id="/integrations/lightning-installation/" class="nav-item my-1">
                
                 <a href="/integrations/lightning-installation/" class="nav-link p-0">
                    LabChart Lightning
                </a>
        </li>
        <li data-nav-id="/integrations/openvibe/" class="nav-item my-1">
                
                 <a href="/integrations/openvibe/" class="nav-link p-0">
                    Device Syncing With LSL
                </a>
        </li>
        <li data-nav-id="/integrations/psychopy/" class="nav-item my-1 active">
                
                 <a href="/integrations/psychopy/" class="nav-link p-0">
                    PsychoPy Builder
                </a>
        </li>
        <li data-nav-id="/integrations/eeglab/" class="nav-item my-1">
                
                 <a href="/integrations/eeglab/" class="nav-link p-0">
                    EEGLab
                </a>
        </li>
        </ul>
    </li>
    <li data-nav-id="/faqs/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/faqs/"><h6>FAQs</h6></a>
    </li>
    <li data-nav-id="/troubleshooting/" class="nav-item my-1
        ">
        
        <a class="nav-link p-0" href="/troubleshooting/"><h6>Troubleshooting</h6></a>
    </li>
    <li data-nav-id="/explore-desktop-guide/" class="nav-item my-1 haschildren
        ">
        
        <a class="nav-link p-0" href="/explore-desktop-guide/"><h6>Explore Desktop Guide</h6></a>
        <ul class="list-unstyled ml-2">
        <li data-nav-id="/explore-desktop-guide/getting-started/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/getting-started/" class="nav-link p-0">
                    Getting Started
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/usage/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/usage/" class="nav-link p-0">
                    Usage
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/visualize/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/visualize/" class="nav-link p-0">
                    Visualization
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/record/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/record/" class="nav-link p-0">
                    Recording
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/impedance/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/impedance/" class="nav-link p-0">
                    Impedance
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/lsl/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/lsl/" class="nav-link p-0">
                    Lab Streaming Layer
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/other/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/other/" class="nav-link p-0">
                    Other
                </a>
        </li>
        <li data-nav-id="/explore-desktop-guide/troubleshooting/" class="nav-item my-1">
                
                 <a href="/explore-desktop-guide/troubleshooting/" class="nav-link p-0">
                    Troubleshooting
                </a>
        </li>
        </ul>
    </li>
        </ul>
    </div>
</nav>


</div>
                <div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky border-left"><div class="docs-toc">
	<nav id="TableOfContents">
  <ul>
    <li><a href="#install-software">Install software</a>
      <ul>
        <li><a href="#download-explorepy">Download explorepy</a></li>
        <li><a href="#edit-explorepy">Edit explorepy</a></li>
        <li><a href="#download-psychopy">Download PsychoPy</a></li>
      </ul>
    </li>
    <li><a href="#use-explorepy-in-psychopy-builder">Use explorepy in PsychoPy builder</a>
      <ul>
        <li><a href="#initialize">Initialize</a></li>
        <li><a href="#set-an-event-marker">Set an event marker</a></li>
        <li><a href="#example">Example</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
</div>
                <div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3">
                

<h1>PsychoPy Builder</h1>

<p>Here is a guide to running <code><a href="https://explorepy.readthedocs.io/">explorepy</a></code> inside PsychoPy experiments. We will demonstrate how to record data, set markers, and push to <a href="https://labstreaminglayer.readthedocs.io/info/intro.html">lab streaming layer (LSL)</a>.</p>
<h2 id="install-software">Install software</h2>
<h3 id="download-explorepy">Download explorepy</h3>
<ol>
<li>Download <a href="https://www.anaconda.com/products/individual#download-section">Anaconda</a>.</li>
<li>Open the Anaconda prompt and create a virtual environment: <code>conda create -n psychopyenv python=3.8</code></li>
<li>Activate the virtual environment: <code>conda activate psychopyenv</code></li>
<li>Download <code><a href="https://github.com/Mentalab-hub/explorepy/archive/refs/tags/v1.6.0.zip">explorepy</a></code>, and extract the files.</li>
</ol>
<h3 id="edit-explorepy">Edit explorepy</h3>
<figure style="float:right;">
<img class="mobile" src="/img/Integrations/comment-out-line.png" alt="How the explorepy code should look" width="400"/>
<figcaption> Comment out line 215. </figcaption>
</figure>
<ol start="5">
<li>Open the <code>explorepy-1.8.0\src\explorepy\stream_processor.py</code> script using a text editor (e.g. right-click → open with → Notepad).</li>
<li>Comment out line 215: <code>logger.info(f&quot;Setting a marker with code: {code}&quot;)</code>. (To do this add a <code>#</code> at the beginning of this line.)</li>
<li>Save your changes, the code should look like the figure.</li>
<li>Navigate to the <code>explorepy-1.8.0</code> directory in your terminal: <code>cd &lt;PATH-TO-EXPLOREPY&gt;</code></li>
<li>Install <code>explorepy</code>: <code>pip install .</code></li>
</ol>
<h3 id="download-psychopy">Download PsychoPy</h3>
<ol start="10">
<li>Download the <a href="https://github.com/psychopy/psychopy/releases/download/2021.2.3/PsychoPy-2021.2.3.zip">PsychoPy source code</a> and extract the files.</li>
<li>Navigate to the extracted folder (i.e. PsychoPy-2023.1.0) in your terminal: <code>cd &lt;PATH-TO-PSYCHOPY&gt;</code></li>
<li>Install PsychoPy: <code>pip install .</code></li>
<li>Run PsychoPy: <code>python psychopy\app\psychopyApp.py</code></li>
</ol>

<div class="alert alert-info" role="alert">
    To open PsychoPy next time:<br>
1. Open Anaconda prompt<br>
2. Navigate to the PsychoPy folder (step 11 above)<br>
3. Run PsychoPy: <code>python psychopy\app\psychopyApp.py</code> (step 12 above)<br>
</div>

<h2 id="use-explorepy-in-psychopy-builder">Use explorepy in PsychoPy builder</h2>
<h3 id="initialize">Initialize</h3>
<p>In order to run <code>explorepy</code>, you will need to add a <strong>Code</strong> component to your experiment. In the &ldquo;Begin Experiment&rdquo; section, setup and initialize streaming, recording (optional) or push to LSL (optional).</p>
<figure style="text-align:center;">
<img class="mobile" src="/img/Integrations/psychopy-code.png" alt="PsychoPy add code screenshot" width="90%"/>
<figcaption> Look for add <b>Code</b> option. </figcaption>
</figure>
<p>To do this, add the following code to your <strong>Code</strong> file:</p>
<pre tabindex="0"><code>from explorepy import Explore

explore = Explore()
explore.connect(device_name='Explore_XXXX')
explore.push2lsl()
explore.record_data(file_name='recorded_trial_02', file_type='csv', do_overwrite=False)
</code></pre><p>
<div class="alert alert-danger" role="alert">
    If you have multiple code components in your experiment, this initialization script should be only in one of them.
</div>


<div class="alert alert-info" role="alert">
    Line 4: enter your device’s ID, which is the last 4 digits on the label on the back of your Mentalab Explore device. E.g., <code>Explore_CA52</code>.<br>
Line 6: remember to set the filename; the file type can be <code>csv</code> or <code>edf</code> (CSV recommended).
</div>
</p>
<h3 id="set-an-event-marker">Set an event marker</h3>
<figure style="float:right;">
<img class="mobile" src="/img/Integrations/psychopy-begin-routine.png" alt="Begin routine in PsychoPy" width="400"/>
<figcaption> If you need a marker at the start of a loop, <br>use the "Begin Routine" tab. </figcaption>
</figure>
<p>To set an event marker in your recorded data, use the <code>set_marker</code> method. For instance, if there is a loop and the beginning of each iteration should be marked, call <code>set_marker</code> in the &ldquo;Begin Routine&rdquo; section of your <strong>Code</strong> component.</p>
<p>If instead you would like to mark multiple event types, you can assign specific codes to each type of marker using the following pattern:</p>
<pre tabindex="0"><code>if cond == 'left':
    explore.set_marker(10)
elif cond == 'right':
    explore.set_marker(11)
elif cond == 'up':
    explore.set_marker(12)
elif cond == 'down':
    explore.set_marker(13)
</code></pre><h3 id="example">Example</h3>
<p><a href="/files/Mentalab-psychopy-experiment-example.zip">Here</a>, you find an PsychoPy experiment. The file iterates over 4 conditions (left, right, up and down) while recording the data. As each trial begins, a marker event is set in the recorded data. The data and event markers are pushed to LSL at the same time.</p>
<p>To change the name of the Mentalab Explore device and the recorded file:</p>
<ol>
<li>Click on &ldquo;trial&rdquo; in the <strong>Flow</strong> section</li>
<li>Click &ldquo;code&rdquo; in the <strong>Routines</strong> section</li>
<li>Change the relevant arguments in the script in the &ldquo;Begin Experiment&rdquo; tab
<br><br></li>
</ol>
<p>For more information or support, do not hesitate to get in contact at: <a href="mailto:support@mentalab.com">support@mentalab.com</a></p>


    


                </div>

            </div> 

        </div> 
<p style="text-align: center;">Copyright © 2022 Mentalab</p>
<script src="https://wiki.mentalab.com/lib/jquery.min.js"></script> 
<script src="https://wiki.mentalab.com/lib/popper.min.js"></script> 

<script src="https://wiki.mentalab.com/js/bootstrap.min.js"></script> 


<script type="text/javascript" src="/plugins/lunr.min.js"></script>
<script type="text/javascript" src="/plugins/auto-complete.js"></script>
<link href="/plugins/auto-complete.css" rel="stylesheet">
<script type="text/javascript">
  
      var baseurl = "https:\/\/wiki.mentalab.com\/";
  
</script>
<script type="text/javascript" src="/plugins/search.js"></script>


<script type="text/javascript" src="/plugins/clipboard.js"></script>
<script>
  new ClipboardJS('.btn');
</script>
</body>
</html>
